###############################################################################
#
#  SMakefile
#
#  Makefile for the `SMake' utility required to build 'GenesisPrefs'
#
#  1998 by Michael Neuweiler
#
###############################################################################

.c.o:
   sc $(CFLAGS) $(GST) $(OPTIONS) $*.c

.asm.o:
   ASM -D $*.asm

CPU      = ANY
#CPU     = 68030
#DEMO     = DEF=DEMO
NC       = DEF=NETCONNECT
#DEBUG   = DBG=FULL
OPTIMIZE = OPT OPTTIME NOOPTINLOCAL

OPTIONS  = CPU=$(CPU) $(OPTIMIZE)
GST      = GSTIMM GST=/includes.gst

CFLAGS   = MCCONS ERRREXX STRMERGE NOSTKCHK IDLEN=65 NOVER IGN=105 IGN=147 NOMINC CNEST STREQ NOICONS DEF=_M$(CPU) $(DEMO) $(DEBUG) $(NC)

LFLAGS   = ND SC SD NOICONS MAXHUNK 100000
#LFLAGS  = SC SD NOICONS MAXHUNK 100000

OBJS     = mui_MainWindow.o mui_About.o mui_DataBase.o mui_Dialer.o mui_IfaceWindow.o \
           mui_Modem.o mui_PasswdReq.o mui_Provider.o mui_ProviderWindow.o mui_User.o \
           mui_UserWindow.o main.o globals.o amiga.o
LIBS     = lib:amiga.lib lib:sc.lib

all:   /includes.gst Strings.h GenesisPrefs

/includes.gst:  /includes.h
      GST >NIL: UNLOAD includes.gst
      SC NOOBJNAME INCLUDEDIR=netinclude: IDLEN=65 NOVERSION MAKEGST=$@ /includes.h
      GST $@

Strings.h: Strings.cd
   cat2h Strings.cd Strings.h

GenesisPrefs:   $(OBJS)
   SLINK WITH T:GenesisPrefs.WITH <<!(T:GenesisPrefs.WITH)
      FROM  lib:c.o $(OBJS)
      TO    GenesisPrefs
      LIB   $(LIBS)
      MAP   GenesisPrefs.map H
      $(LFLAGS)
   <

mui_MainWindow.o: mui_MainWindow.c /includes.h /Genesis.h\
 /genesis.lib/libraries/genesis.h /genesis.lib/proto/genesis.h\
 /genesis.lib/pragmas/genesis_lib.h rev.h Strings.h mui.h mui_DataBase.h\
 mui_Dialer.h mui_MainWindow.h mui_Modem.h mui_PasswdReq.h\
 mui_User.h mui_Provider.h mui_ProviderWindow.h protos.h\
 mui:Developer/C/Include/MUI/grouppager_mcc.h images/information.h images/databases.h\
 images/dialer.h images/modem.h images/provider.h\
 images/logo.h

globals.o: globals.c /includes.h /Genesis.h Strings.h mui.h protos.h\
 mui:developer/c/include/mui/grouppager_mcc.h images/logo.h images/databases.h images/dialer.h\
 images/modem.h images/provider.h images/user.h images/information.h

mui_IfaceWindow.o: mui_IfaceWindow.c /includes.h /Genesis.h\
 /genesis.lib/libraries/genesis.h /genesis.lib/proto/genesis.h\
 /genesis.lib/pragmas/genesis_lib.h Strings.h mui.h mui_IfaceWindow.h\
 mui_ProviderWindow.h protos.h

mui_Dialer.o: mui_Dialer.c /includes.h /Genesis.h Strings.h mui.h mui_Dialer.h\
 protos.h

mui_User.o: mui_User.c /includes.h /Genesis.h Strings.h mui.h mui_User.h\
 mui_UserWindow.h protos.h

mui_UserWindow.o: mui_UserWindow.c /includes.h /Genesis.h\
 /genesis.lib/libraries/genesis.h /genesis.lib/proto/genesis.h\
 /genesis.lib/pragmas/genesis_lib.h Strings.h mui.h mui_UserWindow.h mui_User.h\
 mui_PasswdReq.h protos.h

mui_Provider.o: mui_Provider.c /includes.h /Genesis.h Strings.h mui.h\
 mui_Provider.h mui_ProviderWindow.h protos.h

amiga.o: amiga.c /includes.h /Genesis.h /genesis.lib/libraries/genesis.h\
 /genesis.lib/proto/genesis.h /genesis.lib/pragmas/genesis_lib.h Strings.h mui.h protos.h

main.o: main.c /includes.h /Genesis.h /genesis.lib/libraries/genesis.h\
 /genesis.lib/proto/genesis.h /genesis.lib/pragmas/genesis_lib.h rev.h Strings.h mui.h\
 mui_About.h mui_DataBase.h mui_Dialer.h mui_MainWindow.h mui_Modem.h\
 mui_PasswdReq.h mui_User.h mui_Provider.h mui_ProviderWindow.h mui_IfaceWindow.h\
 mui_UserWindow.h protos.h mui:Developer/C/Include/mui/grouppager_mcc.h

mui_About.o: mui_About.c /includes.h /Genesis.h rev.h Strings.h mui.h\
 mui_About.h mui_MainWindow.h protos.h images/logo.h

mui_DataBase.o: mui_DataBase.c /includes.h /Genesis.h Strings.h mui.h\
 mui_DataBase.h protos.h

mui_Modem.o: mui_Modem.c /includes.h /Genesis.h Strings.h mui.h mui_Modem.h\
 protos.h

mui_PasswdReq.o: mui_PasswdReq.c /includes.h /Genesis.h Strings.h mui.h\
 mui_PasswdReq.h protos.h

mui_ProviderWindow.o: mui_ProviderWindow.c /includes.h /Genesis.h\
 /genesis.lib/libraries/genesis.h /genesis.lib/proto/genesis.h\
 /genesis.lib/pragmas/genesis_lib.h Strings.h mui.h mui_ProviderWindow.h\
 mui_IfaceWindow.h mui_Provider.h protos.h

